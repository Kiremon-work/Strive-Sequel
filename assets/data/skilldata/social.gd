extends Reference

var skills = {
	mentor = {  #fix
		code = 'mentor',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		social_skill_stats = [],
		reqs = [],
		targetreqs = [{code = 'is_master', check = false}],
		effects = [Effectdata.rebuild_template({effect = 'e_mastermentor'})],
		cost = {},
		charges = 1,
		cooldown = 1,
		icon = load("res://assets/images/iconsskills/Mindread.png"),
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'praise',
		value = [['0']],
		damagestat = 'no_stat',
	},
	drain = {#target -20 energy, -20% hp, -20% mana | caster takes all of it.
		code = 'drain',
		descript = '',
		type = 'social',
		ability_type = 'spell',
		social_skill_stats = ['wits'],
		reqs = [],
		targetreqs = [],
		effects = [],
		cost = {},
		charges = 3,
		cooldown = 3,
		icon = load("res://assets/images/iconsskills/LifeDrain.png"),
		tags = ['drain'],
		is_drain = 1.0,
		dialogue_report = '',
		dialogue_show_repeat = false,
		value = [['target.hp','*-0.2'],['target.mp','*-0.2']],
		damagestat = ['hp','mp'],
	},
	drain_mana = {
		code = 'drain_mana',
		descript = '',
		type = 'social',
		ability_type = 'spell',
		social_skill_stats = ['wits'],
		reqs = [],
		targetreqs = [],
		effects = [],
		cost = {},
		charges = 2,
		cooldown = 2,
		icon = load("res://assets/images/iconsskills/ManaDrain.png"),
		tags = ['drain'],
		is_drain = 1.0,
		value = [['target.mpmax','*-0.35']],
		damagestat = ['mp'],
	},
	hardwork = {#+50% productivity for the day
		code = 'hardwork',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		social_skill_stats = ['physics'],
		reqs = [],
		targetreqs = [],
		effects = [Effectdata.rebuild_template({trigger = variables.TR_SOC_SPEC, duration = 12, effect = 'e_t_hardwork'})],
		cost = {},
		charges = 1,
		cooldown = 5,
		icon = load("res://assets/images/iconsskills/Discipline.png"),
		tags = ['no_target'],
		value = ['0'],
		damagestat = 'no_stat',
		receiver = 'area',
		process_no_stat = true,
#		dialogue_report = '',
#		dialogue_show_repeat = false,
	},
	discipline = {
		code = 'discipline',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		social_skill_stats = ['physics'],
		reqs = [],
		targetreqs = [],
		effects = [Effectdata.rebuild_template({duration = 20, effect = 'e_t_discipline'})],
		cost = {},
		charges = 2,
		cooldown = 4,
		icon = load("res://assets/images/iconsskills/Discipline2.png"),
		tags = ['positive'],
		value = ['0'],
		damagestat = 'no_stat',
		dialogue_report = '',
		dialogue_show_repeat = false,
	},
	consume_soul = {#kills target, gain its experience
		code = 'consume_soul',
		descript = '',
		type = 'social',
		ability_type = 'spell',
		social_skill_stats = ['wits'],
		reqs = [],
		targetreqs = [{code = 'is_master', check = false}],
		effects = ['e_target_kill'],
		cost = {mp = 60},
		charges = 1,
		cooldown = 7,
		icon = load("res://assets/images/iconsskills/soulconsume.png"),
		tags = [],
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'souleat',
		value = ['target.base_exp'],
		damagestat = 'base_exp',
		receiver = 'caster',
	},
	make_undead = {#turns target into undead (trait)
		code = 'make_undead',
		descript = '',
		type = 'social',
		ability_type = 'spell',
		social_skill_stats = ['wits'],
		reqs = [],
		targetreqs = [{code = 'is_master', check = false},{code = 'is_unique', value = false}, {code = 'trait', trait = 'undead', check = false}],
		effects = ['e_s_undead'],
		cost = {mp = 50},
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'mindcontrol',
		charges = 1,
		cooldown = 3,
		icon = load("res://assets/images/iconsskills/TurnUndead.png"),
		tags = [],
		value = [['0']],
		damagestat = 'no_stat'
	},
	soul_bind = { #fix prams
		code = 'soul_bind',
		descript = '',
		type = 'social',
		ability_type = 'spell',
		social_skill_stats = ['wits'],
		reqs = [],
		targetreqs = [{code = 'is_master', check = false}],
		effects = [
#			Effectdata.rebuild_template({effect = 'e_s_dominate'}),
			Effectdata.rebuild_template({effect = 'e_s_bond'}),
		],
		cost = {mp = 50},
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'mindcontrol',
		charges = 1,
		cooldown = 4,
		icon = load("res://assets/images/iconsclasses/Dominator.png"),
		tags = [],
		value = [['5']],
		damagestat = '=consent'
	},
	master_lust_skill ={
		code = 'master_lust_skill',
		new_syntax = true,
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [{code = 'stat', stat = 'lust', operant = 'gte', value = 50}],
		effects = [],
		cost = {},
		charges = 1,
		cooldown = 1,
		icon = load("res://assets/images/iconsskills/Reward_with_sex 3.png"),
		tags = ['dialogue_skill'],
		dialogue_text = '',
		dialogue_image = null,
		dialogue_options = [{code = "master_lust_exp", reqs = [], text = '1'},
		{code = "master_lust_hp", reqs = [], text = '2'},
		{code = "master_lust_buff", reqs = [], text = '3'}, #+20% productivity for 3 days
		{code = "master_lust_combat_buff", reqs = [], text = '4'} # +15% atk matk for 2 days
		],
	},
	master_lust_exp = {#consume all target lust, give 1xp per 1lust to target
		code = 'master_lust_exp',
		
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],#{code = 'stat', name = 'lust'}], #TOCHECK
		effects = [],
		cost = {},
		charges = 0,
		cooldown = 0,
		icon = null,
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		value = [['target.lust','*-1.0'],['target.lust',"*0.5"]],
		damagestat = ['lust','base_exp'],
	},
	master_lust_hp = {#consume all target lust, give 1hp 0.5mp per lust
		code = 'master_lust_hp',
		
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [],
		cost = {},
		charges = 0,
		cooldown = 0,
		icon = null,
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		value = [['target.lust','*-1.0'],['target.lust'],['target.lust','*0.5']],
		damagestat = ['lust','hp','mp'],
	},
	master_lust_buff = {#consume 50 target lust, gives +20% productivity for 3 days buff
		code = 'master_lust_buff',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [Effectdata.rebuild_template({duration = 12, effect = 'master_productivity_1'})],
		cost = {},
		charges = 0,
		cooldown = 0,
		icon = load("res://assets/images/iconsclasses/Alchemist.png"),
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		value = [['-50']],
		damagestat = ['lust'],
	},
	master_lust_combat_buff = {
		code = 'master_lust_combat_buff',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [Effectdata.rebuild_template({duration = 8, effect = 'master_combat_1'})],
		cost = {},
		charges = 0,
		cooldown = 0,
		icon = load("res://assets/images/iconsclasses/Alchemist.png"),
		tags = ['positive'],
		dialogue_report = 'dialogue_master_lust_combat_buff',
		dialogue_show_repeat = false,
		value = [['-50']],
		damagestat = ['lust'],
	},
	succubus_lust_skill = {
		code = 'succubus_lust_skill',
		new_syntax = true,#not true but template skills do not need reformatting at all
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [{code = 'stat', stat = 'lust', operant = 'gte', value = 50}],
		effects = [],
		cost = {mp = 15},
		charges = 1,
		cooldown = 1,
		icon = load("res://assets/images/iconsskills/Reward_with_sex 3.png"),
		tags = ['dialogue_skill'],
		dialogue_text = '',
		dialogue_image = 'succubuslust',
		dialogue_options = [{code = "succubus_lust_xp_convert", reqs = [], text = '1'},
		{code = "succubus_lust_hp_convert", reqs = [], text = '2'},
#		{code = "succubus_lust_obed_convert", reqs = [], text = '3'},
		{code = "succubus_lust_combat_buff", reqs = [], text = '3'}
		],
	},
	succubus_lust_xp_convert = {#consume target lust, receive base exp based on lust consumed
		code = 'succubus_lust_xp_convert',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [],
		cost = {mp = 15},
		charges = 0,
		cooldown = 0,
		icon = load("res://assets/images/iconsclasses/Alchemist.png"),
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'succubuslust',
		value = [['target.lust','*-1.0'],['target.lust']],
		damagestat = ['lust','base_exp'],
		receiver = ['target','caster']
	},
	succubus_lust_hp_convert = {#consume target lust, recover 1x hp and 0.75x mana 
		code = 'succubus_lust_hp_convert',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [],
		cost = {mp = 15},
		charges = 0,
		cooldown = 0,
		icon = load("res://assets/images/iconsclasses/Alchemist.png"),
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'succubuslust',
		value = [['target.lust','*-1.0'],['target.lust'],['target.lust', '*0.75']],
		damagestat = ['lust','hp', 'mp'],
		receiver = ['target','caster', 'caster']
	},
	succubus_lust_combat_buff = {#consume 50 target lust, gives +25% atk/matk buff for 2 days
		code = 'succubus_lust_combat_buff',
		descript = '',
		type = 'social',
		ability_type = 'skill',
		reqs = [],
		targetreqs = [],
		effects = [Effectdata.rebuild_template({duration = 8, effect = 'succubus_combat_1'})],
		cost = {mp = 15},
		charges = 0,
		cooldown = 0,
		icon = load("res://assets/images/iconsclasses/Alchemist.png"),
		tags = ['positive'],
		dialogue_report = '',
		dialogue_show_repeat = false,
		dialogue_image = 'succubuslust',
		value = [['-50']],
		damagestat = ['lust'],
	},
	
}


var effects = {
	e_mastermentor = {
		type = 'temp_s',
		target = 'target',
		stack = 'master_mentor',
		duration = 4,
		tick_event = [variables.TR_TICK],
		rem_event = [variables.TR_DEATH],
		tags = ['positive', 'buff'],
		statchanges = {exp_gain_mod = 1},
		buffs = ['b_mastermentor'],
	},
	e_t_hardwork = {
		type = 'temp_s',
		target = 'receiver',
		stack = 'hardwork',
		tick_event = variables.TR_TICK,
		duration = 'arg',
		statchanges = {productivity = 0.5},
	},
	e_t_discipline = {
		type = 'temp_s',
		target = 'target',
		stack = 'discipline',
		tick_event = variables.TR_TICK,
		duration = 'arg',
		statchanges = {mod_collect = 0.5, mod_hunt = 0.5, mod_fish = 0.5, mod_cook = 0.5, mod_smith = 0.5, mod_alchemy = 0.5, mod_tailor = 0.5, mod_farm = 0.5,},
	},
	e_s_bond = {
		type = 'temp_s',
		target = 'target',
		stack = 'soul_bind',
		duration = 4,
		tick_event = [variables.TR_TICK],
		rem_event = [variables.TR_DEATH],
		tags = ['no_job', 'no_combat'],
		buffs = ['b_soulbind'],
	},
	master_productivity_1 = {
		type = 'temp_s',
		target = 'target',
		tick_event = variables.TR_TICK,
		duration = 12,
		stack = 'mas_prod',
		statchanges = {productivity = 0.2},
		buffs = [
			{
				icon = "res://assets/images/iconsclasses/Worker.png",
				description = "TRAITEFFECTMASTERPRODUCT",
			}
		],
	},
	master_combat_1 = {
		type = 'temp_s',
		target = 'target',
		stack = "mas_combat",
		tick_event = variables.TR_TICK,
		duration = 8,
		statchanges = {atk_add_part = 0.15, matk_add_part = 0.15},
		buffs = [
			{
				icon = "res://assets/images/iconsclasses/Fighter.png",
				description = "TRAITEFFECTMASTERCOMBAT",
			}
		],
	},
	succubus_combat_1 = {
		type = 'temp_s',
		target = 'caster',
		stack = "suc_combat",
		tick_event = variables.TR_TICK,
		duration = 8,
		statchanges = {atk_add_part = 0.25, matk_add_part = 0.25},
		buffs = [
			{
				icon = "res://assets/images/iconsclasses/Fighter.png",
				description = "TRAITEFFECTSUCCOMBAT",
			}
		],
	},
}


var atomic_effects = {
	
}


var buffs = {
	b_mastermentor = {
		icon = "res://assets/images/iconsskills/Mindread.png",#fix
		description = "BUFFDESCRIPTMENTOR",
		t_name = 'master_mentor',
		mansion_only = true
	},
	b_soulbind = {
		icon = "res://assets/images/iconsenchants/curse_mono_100.png",#fix
		description = "",
		t_name = 'soulbind',
	},
	b_soulbindcaster = { #not used
		icon = "res://assets/images/iconsenchants/curse_mono_100.png",#fix
		description = "",
		t_name = 'soulbindcaster',
	},
	b_hardwork = {
		icon = "res://assets/images/iconsclasses/Worker.png",
		description = "TRAITEFFECTHARDWORK",
		tags = ['mansion_only']
	},
	b_discipline = {
		icon = "res://assets/images/iconsskills/Discipline2.png",
		description = "TRAITEFFECTDISCIPLINE",
		tags = ['mansion_only']
	}
}

var stacks = {
	master_mentor = {}, #st 1
	soul_bind = {}, #st 1
	mas_prod = {}, #st 1
	mas_combat = {}, #st 1
	suc_combat = {}, #st 1
	hardwork = {
		type = 'stack_s',
		stack = 1,
		buff = 'b_hardwork'
	}, #st 1 add
	discipline = {
		type = 'stack_s',
		stack = 1,
		buff = 'b_discipline'
	}, #st 1 add
}
